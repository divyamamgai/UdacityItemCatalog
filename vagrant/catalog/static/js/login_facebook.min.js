(function(a,g,e){var f,c,b=a.login_state;a.fbAsyncInit=function(){FB.init({appId:"1680669308673886",cookie:true,xfbml:true,version:"v2.8"})};(function(l,i,m){var k,j=l.getElementsByTagName(i)[0];if(l.getElementById(m)){return}k=l.createElement(i);k.id=m;k.src="//connect.facebook.net/en_US/sdk.js";j.parentNode.insertBefore(k,j)}(g,"script","facebook-jssdk"));function h(){var d=FB.getAuthResponse()["accessToken"];FB.api("/me",function(i){f.css("display","none");c.css("display","inline-block");e.ajax({type:"POST",url:"/login/facebook/"+b,processData:false,data:d,contentType:"application/octet-stream; charset=utf-8",success:function(j,k){if(k==="success"){a.location.href="/catalog"}else{alert("Error occurred in the login process.\nMessage: "+j);f.css("display","block");c.css("display","none")}}})})}a.facebookLogin=h;e(function(){f=e(".login-button",g);c=e("#login-loader",g)})})(window,document,jQuery);